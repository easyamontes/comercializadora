<div class="principal">
    <!-- creando cabecera de la requisicion -->
    <div class="row">
        <div class="container-fluid
                    d-flex
                    justify-content-center
                    flex-row">
            <fieldset>
                <legend>{{title}}</legend>
                <!--Dibujando la baecera de informacion-->
                <mat-form-field class="p-1">
                    <input matInput [value]="fecha.value" [(ngModel)]="requi.fecha" [matDatepicker]="pickerFecha"
                        #fecha="ngModel" placeholder="Fecha">
                    <mat-datepicker-toggle matSuffix [for]="pickerFecha"></mat-datepicker-toggle>
                    <mat-datepicker #pickerFecha></mat-datepicker>
                </mat-form-field>
                <mat-form-field *ngIf="params != 1" class="p-1">
                    <mat-select #provee="ngModel" [(ngModel)]="requi.proveedor_id" placeholder="Proveedor">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let prov of provlist" [value]="prov.id">{{prov.nombre}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field *ngIf="params == 1" class="p-1">
                    <mat-select #socio="ngModel" [(ngModel)]="requi.pdestino_id" placeholder="Socio">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let prov of provlist" [value]="prov.id">{{prov.nombre}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="p-1">
                    <input matInput [(ngModel)]="requi.ffactura" [matDatepicker]="pickerFactura" #ffecha="ngModel"
                        placeholder="Fecha">
                    <mat-datepicker-toggle matSuffix [for]="pickerFactura"></mat-datepicker-toggle>
                    <mat-datepicker #pickerFactura></mat-datepicker>
                </mat-form-field>
                <mat-form-field class="p-1">
                    <input matInput [(ngModel)]="requi.factura" #factura="ngModel" placeholder="Factura">
                </mat-form-field>
                <button class="p-1 botonbuscar" mat-flat-button (click)="createArticulo();">NUEVO</button>
            </fieldset>
        </div>
    </div>
    <div class="reporte">
        <table class="table table-striped table-hover">
            <thead class="tablareporte">
                <tr>
                    <th>Codigo</th>
                    <th>Articulo</th>
                    <th>Cantidad</th>
                    <th *ngIf="params==1">Existencia</th>
                    <th>Precio</th>
                    <th>Total</th>
                    <th>Eliminar</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lis of articulos; let id = index">
                    <td>{{lis.codigo}}</td>
                    <td>
                        <select class=" cuadrotexto" #articulo="ngModel" [(ngModel)]="lis.articulo_id"
                            (ngModelChange)="setArticulo($event,id)">
                            <option *ngFor="let artitem of artilist" [value]="artitem.id">
                                {{artitem.articulo +' '+artitem.marca +' '+artitem.modelo | uppercase}}  </option>
                        </select>
                    </td>
                    <td>
                        <input class="cuadrotexto" [(ngModel)]="lis.cantidad" #factura="ngModel" type="number">
                    </td>
                    <td *ngIf="params==1">{{lis.totalexistencia}}</td>
                    <td>
                        <input class="cuadrotexto" [(ngModel)]="lis.precio" #factura="ngModel" type="number">
                    </td>
                    <td>{{lis.cantidad * lis.precio  |currency}}</td>
                    <td class="cen"> <button class="botontaba" (click)="deleteArticulo(i)" color="primary">
                            <span> <i class="fas fa-trash-alt"></i></span>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row">
        <div class="col-md-2 col-6">
          <button mat-raised-button (click)="onSubmit();" class="btn btn-success col-md-12" style="margin: 1px">Guardar</button>
        </div>
         <div class="col-md-2 col-6">
            <button mat-raised-button (click)="onCancel()" class="btn btn-danger col-md-12" style="margin: 1px">Cancelar</button>
         </div>
        
    </div>
</div>
